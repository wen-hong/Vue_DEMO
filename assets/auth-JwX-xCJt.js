import{q as o}from"./index-BxljmCfw.js";import{a as e}from"./api-BQBrDuND.js";const r=o("auth",{state:()=>({token:localStorage.getItem("access_token"),user:null,isReady:!1}),getters:{isLogin:t=>!!t.token&&!!t.user},actions:{async init(){if(!this.token){this.isReady=!0;return}try{await this.fetchMe()}catch{this.logout()}finally{this.isReady=!0}},async login(t,s){const a=await e.post("/login",{email:t,password:s});this.token=a.data.access_token,localStorage.setItem("access_token",this.token),await this.fetchMe()},async fetchMe(){const t=await e.get("/me");this.user=t.data},logout(){this.token=null,this.user=null,localStorage.removeItem("access_token")}}});export{r as u};
