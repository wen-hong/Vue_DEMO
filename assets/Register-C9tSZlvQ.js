import{r as o,k as p,c as m,a as s,w,d as r,f,g as x,v as V,t as y,h as k,i as R,j as q,o as v,b as B,l as N}from"./index-CkoSDtHd.js";import{_ as b}from"./PasswordInput-CqHmHY7b.js";import{g as P,P as C,v as E}from"./passwordValidator-eKG-CXpm.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"container"},U={class:"login-card"},j={class:"mb-3"},D={class:"mb-3"},L={class:"mb-3"},T={key:0,class:"text-danger text-center mt-3"},I={key:1,class:"text-success text-center mt-3"},O={class:"text-center mt-4"},$={__name:"Register",setup(h){q();const n=o(""),t=o(""),u=o(""),a=o(""),i=o(!1),c=p(()=>P(t.value));p(()=>Object.values(c.value).every(Boolean));const g=async()=>{a.value="",i.value=!1;const d=E(t.value,u.value,{requireStrong:!0});if(d){a.value=d;return}try{await N.post("/register",{email:n.value,password:t.value}),i.value=!0}catch(e){a.value=e.response?.data?.error||e.message||"註冊失敗"}};return(d,e)=>{const _=R("RouterLink");return v(),m("div",S,[s("div",U,[e[8]||(e[8]=s("h2",{class:"login-title text-center mb-4"},"使用者註冊",-1)),s("form",{onSubmit:w(g,["prevent"])},[s("div",j,[e[3]||(e[3]=s("label",{class:"form-label"},"Email",-1)),x(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),type:"email",class:"form-control",placeholder:"請輸入 Email",required:""},null,512),[[V,n.value]])]),s("div",D,[e[4]||(e[4]=s("label",{class:"form-label"},"密碼",-1)),r(b,{modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value=l),placeholder:"至少 6 碼",required:""},null,8,["modelValue"])]),s("div",L,[e[5]||(e[5]=s("label",{class:"form-label"},"再次確認密碼",-1)),r(b,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value=l),placeholder:"至少 6 碼",required:""},null,8,["modelValue"])]),r(C,{rules:c.value},null,8,["rules"]),e[6]||(e[6]=s("button",{type:"submit",class:"btn btn-primary w-100 mt-3"},"註冊",-1)),a.value?(v(),m("p",T,y(a.value),1)):f("",!0),i.value?(v(),m("p",I,"註冊成功，請前往信箱認證")):f("",!0)],32),s("div",O,[r(_,{to:"/loginbackground/login"},{default:k(()=>[...e[7]||(e[7]=[B("已經有帳號？前往登入",-1)])]),_:1})])])])}}},H=M($,[["__scopeId","data-v-6722b7aa"]]);export{H as default};
