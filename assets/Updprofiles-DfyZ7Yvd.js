import{r,m as g,l as v,c as d,a as e,f as b,t as p,g as i,v as c,x,o as f}from"./index-CkoSDtHd.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w={class:"profile-container"},U={class:"avatar-section"},D=["src"],V={class:"upload"},j={class:"form-group"},k={class:"form-group"},C={class:"form-group"},$={class:"form-group"},h=["disabled"],B={__name:"Updprofiles",setup(F){const n=r(!1),t=r({user_name:"",birth:"",sex:null,user_account:""}),u=r(null),s=r("");g(async()=>{const l=await v.get("/profile/me");l.data&&(Object.assign(t.value,l.data),s.value=l.data.avatar_url?`${l.data.avatar_url}?t=${Date.now()}`:"")});const m=l=>{const a=l.target.files[0];a&&(u.value=a,s.value=URL.createObjectURL(a))},_=async()=>{n.value=!0;try{const l=new FormData;l.append("user_name",t.value.user_name),l.append("birth",t.value.birth),t.value.sex!==null&&l.append("sex",t.value.sex),l.append("user_account",t.value.user_account),u.value&&l.append("avatar",u.value);const a=await v.put("/profile/me",l);a.data?.avatar_url&&(s.value=`${a.data.avatar_url}?t=${Date.now()}`),alert("儲存成功"),u.value=null}catch{alert("儲存失敗")}finally{n.value=!1}};return(l,a)=>(f(),d("div",w,[a[8]||(a[8]=e("h2",null,"更新個人資料",-1)),e("div",U,[s.value?(f(),d("img",{key:0,src:s.value,alt:"avatar",class:"avatar"},null,8,D)):b("",!0),e("div",V,[e("input",{type:"file",onChange:m,accept:"image/jpg,image/jpeg,image/png"},null,32)])]),e("div",j,[a[3]||(a[3]=e("label",null,"帳號：",-1)),e("span",null,p(t.value.user_account),1)]),e("div",k,[a[4]||(a[4]=e("label",null,"姓名：",-1)),i(e("input",{"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.user_name=o),placeholder:"請輸入姓名"},null,512),[[c,t.value.user_name]])]),e("div",C,[a[5]||(a[5]=e("label",null,"生日：",-1)),i(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.birth=o),type:"date"},null,512),[[c,t.value.birth]])]),e("div",$,[a[7]||(a[7]=e("label",null,"性別：",-1)),i(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.sex=o)},[...a[6]||(a[6]=[e("option",{value:null},"請選擇",-1),e("option",{value:1},"男",-1),e("option",{value:2},"女",-1)])],512),[[x,t.value.sex]])]),e("button",{class:"save-btn",disabled:n.value,onClick:_},p(n.value?"儲存中...":"儲存"),9,h)]))}},N=y(B,[["__scopeId","data-v-1c3ec34f"]]);export{N as default};
